<% content_for :title do %>
Caster Index
<% end %>
<div class="row">
	<div class="span12">
		Casters > 
	</div>
</div>

<h3>Casters Index</h3>
<% if can? :update, @casters %>
	<div class="row">
		<div class="span12">
			<%= link_to "New Caster",new_caster_path,"class" => "btn btn-success" %>
		</div>
	</div>
<% end %>

<table class="table table-striped">
<tr>
	<th><h4>Caster</h4></th>
	<th><h4>Faction</h4></th>
	<th><h4>Total Lists</h4></th>
	<% if can? :update, @casters %>
		<th><h4>Destroy</h4></th>
		<th><h4>Edit</h4></th>
	<% end %>
</tr>
<% @casters.each do |caster| %>
<tr>
		<td>
				<h5><%= link_to caster.title,caster_path(caster.id) %></h5>
		</td>	
		<td>
			<%= link_to Faction.find(caster.faction_id).title,faction_path(caster.faction_id) %>
		</td>
		<td>
			<%= List.where("caster_id = ?", caster.id).count %>
		</td>
		<% if can? :update, @casters %>
			<td>
				<%= link_to 'Destroy', caster_path(caster), method: :delete, data: { confirm: 'Are you sure?'},"class"=> "btn btn-danger" %>
			</td>
			<td>
				<%= link_to 'Edit', edit_caster_path(caster),"class"=> "btn btn-primary" %>
			</td>
		<% end %>
</tr>
<% end %>
</table>
